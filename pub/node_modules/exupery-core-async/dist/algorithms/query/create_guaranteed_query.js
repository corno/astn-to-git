"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.__create_guaranteed_query = __create_guaranteed_query;
class Guaranteed_Query_Result_Class {
    constructor(executer) {
        this.executer = executer;
    }
    map(handle_value) {
        return __create_guaranteed_query({
            'execute': (on_value) => {
                this.executer.execute((value) => {
                    on_value(handle_value(value));
                });
            }
        });
    }
    then(handle_value) {
        return __create_guaranteed_query({
            'execute': (on_value) => {
                this.executer.execute((value) => {
                    handle_value(value).__start(on_value);
                });
            }
        });
    }
    __start(on_value) {
        this.executer.execute(on_value);
    }
}
/**
 * returns an {@link Async_Value }
 * @param executer the function that produces the eventual value
 * @returns
 */
function __create_guaranteed_query(executer) {
    return new Guaranteed_Query_Result_Class(executer);
}
