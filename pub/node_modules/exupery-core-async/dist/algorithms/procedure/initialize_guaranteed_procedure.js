"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.initialize_no_op_guaranteed_procedure = void 0;
exports.__create_guaranted_procedure = __create_guaranted_procedure;
class Guaranteed_Procedure_Class {
    constructor(executer) {
        this.executer = executer;
    }
    x_execute(get_action, get_parameters) {
        return __create_guaranted_procedure({
            'execute': (on_finished) => {
                this.executer.execute(() => {
                    const action = get_action();
                    const params = get_parameters();
                    action(params).__start(on_finished);
                });
            }
        });
    }
    __start(on_finished) {
        this.executer.execute(on_finished);
    }
}
/**
 * returns an {@link Async_Value }
 * @param executer the function that produces the eventual value
 * @returns
 */
function __create_guaranted_procedure(executer) {
    return new Guaranteed_Procedure_Class(executer);
}
const initialize_no_op_guaranteed_procedure = () => {
    return new Guaranteed_Procedure_Class({
        'execute': (on_finished) => {
            on_finished(); //nothing to do, call on_finished immediately
        }
    });
};
exports.initialize_no_op_guaranteed_procedure = initialize_no_op_guaranteed_procedure;
