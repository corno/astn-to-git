"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.$$ = void 0;
const _ea = __importStar(require("exupery-core-alg"));
const _easync = __importStar(require("exupery-core-async"));
const remove_1 = require("exupery-resources/dist/procedures/unguaranteed/remove");
const do_nothing_1 = require("exupery-resources/dist/procedures/guaranteed/do_nothing");
const write_to_node_1 = require("./write_to_node");
const $$ = ($p) => {
    return _easync.up.sequence([
        $p['remove before creating']
            ? _easync.upi.u(remove_1.$$, ($) => ['remove', $])({
                'path': {
                    'path': $p.path,
                    'escape spaces in path': true,
                },
                'error if not exists': false
            })
            : _easync.upi.u(do_nothing_1.$$, ($) => _ea.panic("not reachable"))(null),
        _easync.up.dictionary($p.directory.map(($, key) => (0, write_to_node_1.$$)({
            'node': $,
            'path': $p.path,
            'key': key,
            'indentation': $p.indentation,
            'newline': $p.newline,
            'remove before creating': false,
        })), ($) => ['nodes', $])
    ]);
};
exports.$$ = $$;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid3JpdGVfdG9fZGlyZWN0b3J5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3Byb2NlZHVyZXMvdW5ndWFyYW50ZWVkL3dyaXRlX3RvX2RpcmVjdG9yeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLHNEQUF1QztBQUd2Qyw0REFBNkM7QUFFN0Msa0ZBQXNGO0FBQ3RGLHdGQUE0RjtBQUk1RixtREFBdUQ7QUFFaEQsTUFBTSxFQUFFLEdBQTBGLENBQ3JHLEVBQUUsRUFDSixFQUFFO0lBQ0EsT0FBTyxPQUFPLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBb0I7UUFFMUMsRUFBRSxDQUFDLHdCQUF3QixDQUFDO1lBQ3hCLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FDWCxXQUFRLEVBQ1IsQ0FBQyxDQUFDLEVBQXFCLEVBQUUsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FDMUMsQ0FBQztnQkFDRSxNQUFNLEVBQUU7b0JBQ0osTUFBTSxFQUFFLEVBQUUsQ0FBQyxJQUFJO29CQUNmLHVCQUF1QixFQUFFLElBQUk7aUJBQ2hDO2dCQUNELHFCQUFxQixFQUFFLEtBQUs7YUFDL0IsQ0FBQztZQUNGLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FDWCxlQUFZLEVBQ1osQ0FBQyxDQUFDLEVBQXFCLEVBQUUsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUN2RCxDQUFDLElBQUksQ0FBQztRQUVYLE9BQU8sQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUNqQixFQUFFLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDLElBQUEsa0JBQWUsRUFBQztZQUN6QyxNQUFNLEVBQUUsQ0FBQztZQUNULE1BQU0sRUFBRSxFQUFFLENBQUMsSUFBSTtZQUNmLEtBQUssRUFBRSxHQUFHO1lBQ1YsYUFBYSxFQUFFLEVBQUUsQ0FBQyxXQUFXO1lBQzdCLFNBQVMsRUFBRSxFQUFFLENBQUMsT0FBTztZQUNyQix3QkFBd0IsRUFBRSxLQUFLO1NBQ2xDLENBQUMsQ0FBQyxFQUNILENBQUMsQ0FBQyxFQUFxQixFQUFFLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQ3pDO0tBQ0osQ0FBQyxDQUFBO0FBQ04sQ0FBQyxDQUFBO0FBakNZLFFBQUEsRUFBRSxNQWlDZCJ9